import { Device, Dashboard, TelemetryData, Command, Rule, Alert } from '@/types/iot';

export const mockDevices: Device[] = [
  {
    id: 'dev-001',
    name: 'Temperature Sensor Alpha',
    type: 'esp32',
    status: 'online',
    lastSeen: new Date(),
    token: 'tk_esp32_a1b2c3d4e5f6',
    organizationId: 'org-001',
    metadata: { location: 'Building A', floor: 3 },
    createdAt: new Date('2024-01-15'),
    updatedAt: new Date(),
  },
  {
    id: 'dev-002',
    name: 'Humidity Controller Beta',
    type: 'raspberry-pi',
    status: 'online',
    lastSeen: new Date(),
    token: 'tk_rpi_g7h8i9j0k1l2',
    organizationId: 'org-001',
    metadata: { location: 'Building A', floor: 2 },
    createdAt: new Date('2024-02-20'),
    updatedAt: new Date(),
  },
  {
    id: 'dev-003',
    name: 'Motion Detector Gamma',
    type: 'arduino',
    status: 'warning',
    lastSeen: new Date(Date.now() - 300000),
    token: 'tk_ard_m3n4o5p6q7r8',
    organizationId: 'org-001',
    metadata: { location: 'Building B', floor: 1 },
    createdAt: new Date('2024-03-10'),
    updatedAt: new Date(),
  },
  {
    id: 'dev-004',
    name: 'Power Monitor Delta',
    type: 'esp8266',
    status: 'offline',
    lastSeen: new Date(Date.now() - 3600000),
    token: 'tk_esp_s9t0u1v2w3x4',
    organizationId: 'org-001',
    metadata: { location: 'Building C', floor: 1 },
    createdAt: new Date('2024-04-05'),
    updatedAt: new Date(),
  },
  {
    id: 'dev-005',
    name: 'Air Quality Sensor',
    type: 'stm32',
    status: 'online',
    lastSeen: new Date(),
    token: 'tk_stm_y5z6a7b8c9d0',
    organizationId: 'org-001',
    metadata: { location: 'Building A', floor: 4 },
    createdAt: new Date('2024-05-12'),
    updatedAt: new Date(),
  },
];

export const generateTelemetryData = (deviceId: string, key: string, count: number = 50): TelemetryData[] => {
  const now = Date.now();
  return Array.from({ length: count }, (_, i) => ({
    deviceId,
    timestamp: new Date(now - (count - i) * 60000),
    key,
    value: Math.random() * 100,
    unit: key === 'temperature' ? '°C' : key === 'humidity' ? '%' : '',
  }));
};

export const mockDashboard: Dashboard = {
  id: 'dash-001',
  name: 'Main Operations',
  description: 'Primary monitoring dashboard',
  widgets: [
    {
      id: 'w-001',
      type: 'gauge',
      title: 'Temperature',
      deviceId: 'dev-001',
      dataKey: 'temperature',
      position: { x: 0, y: 0 },
      size: { w: 2, h: 2 },
      config: { min: 0, max: 100, unit: '°C', color: 'primary' },
    },
    {
      id: 'w-002',
      type: 'chart',
      title: 'Temperature History',
      deviceId: 'dev-001',
      dataKey: 'temperature',
      position: { x: 2, y: 0 },
      size: { w: 4, h: 2 },
      config: { chartType: 'area', timeRange: '1h' },
    },
    {
      id: 'w-003',
      type: 'value',
      title: 'Humidity',
      deviceId: 'dev-002',
      dataKey: 'humidity',
      position: { x: 0, y: 2 },
      size: { w: 2, h: 1 },
      config: { unit: '%' },
    },
    {
      id: 'w-004',
      type: 'status',
      title: 'Device Status',
      deviceId: 'dev-003',
      dataKey: 'status',
      position: { x: 2, y: 2 },
      size: { w: 2, h: 1 },
      config: {},
    },
    {
      id: 'w-005',
      type: 'switch',
      title: 'Relay Control',
      deviceId: 'dev-002',
      dataKey: 'relay',
      position: { x: 4, y: 2 },
      size: { w: 2, h: 1 },
      config: {},
    },
  ],
  organizationId: 'org-001',
  createdAt: new Date('2024-01-01'),
  updatedAt: new Date(),
};

export const mockCommands: Command[] = [
  {
    id: 'cmd-001',
    deviceId: 'dev-001',
    type: 'http',
    method: 'POST',
    endpoint: '/api/v1/control/relay',
    payload: { state: true },
    status: 'acknowledged',
    attempts: 1,
    maxRetries: 3,
    createdAt: new Date(Date.now() - 3600000),
    executedAt: new Date(Date.now() - 3590000),
    acknowledgedAt: new Date(Date.now() - 3580000),
  },
  {
    id: 'cmd-002',
    deviceId: 'dev-002',
    type: 'mqtt',
    method: 'POST',
    endpoint: 'devices/dev-002/commands',
    payload: { action: 'calibrate' },
    status: 'sent',
    attempts: 2,
    maxRetries: 3,
    createdAt: new Date(Date.now() - 1800000),
    executedAt: new Date(Date.now() - 1790000),
  },
  {
    id: 'cmd-003',
    deviceId: 'dev-004',
    type: 'http',
    method: 'POST',
    endpoint: '/api/v1/control/reset',
    payload: { hard: false },
    status: 'failed',
    attempts: 3,
    maxRetries: 3,
    createdAt: new Date(Date.now() - 7200000),
  },
];

export const mockRules: Rule[] = [
  {
    id: 'rule-001',
    name: 'High Temperature Alert',
    enabled: true,
    trigger: {
      type: 'telemetry',
      config: { deviceId: 'dev-001', key: 'temperature' },
    },
    conditions: [{ field: 'value', operator: 'gt', value: 30 }],
    actions: [
      { type: 'alert', config: { severity: 'warning', message: 'Temperature exceeded threshold' } },
      { type: 'email', config: { to: 'admin@example.com' } },
    ],
    organizationId: 'org-001',
  },
  {
    id: 'rule-002',
    name: 'Device Offline Check',
    enabled: true,
    trigger: {
      type: 'schedule',
      config: { cron: '*/5 * * * *' },
    },
    conditions: [],
    actions: [
      { type: 'webhook', config: { url: 'https://api.example.com/health-check' } },
    ],
    organizationId: 'org-001',
  },
];

export const mockAlerts: Alert[] = [
  {
    id: 'alert-001',
    deviceId: 'dev-001',
    ruleId: 'rule-001',
    severity: 'warning',
    message: 'Temperature exceeded 30°C threshold',
    acknowledged: false,
    createdAt: new Date(Date.now() - 600000),
  },
  {
    id: 'alert-002',
    deviceId: 'dev-003',
    ruleId: 'rule-002',
    severity: 'critical',
    message: 'Device connectivity issues detected',
    acknowledged: false,
    createdAt: new Date(Date.now() - 1200000),
  },
  {
    id: 'alert-003',
    deviceId: 'dev-004',
    ruleId: 'rule-002',
    severity: 'critical',
    message: 'Device offline for more than 1 hour',
    acknowledged: true,
    createdAt: new Date(Date.now() - 3600000),
    acknowledgedAt: new Date(Date.now() - 3000000),
  },
];
